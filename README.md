# Mosi圖片轉房間數據產生器

轉換任何圖片至 [Mosi中文版](https://ebluvu.itch.io/mosi-ch) 的房間數據<br>
[關於](https://ebluvu.notion.site/163642e52df080c794f3ea51a1612c57)｜有任何疑問歡迎聯繫我<br>

## 聲明

此篇為Chat GPT與Cursor協助研究 僅作為分享及學術用途

## 所有工具

### 1. 圖片工具

1. **圖片上傳**
   - 準備**一或多**張圖片和遊戲資料（圖片縮放大小取決於你的遊戲地圖尺寸！）
   - 目前支援：
     1. 圖片比例縮放功能 可以放心上傳大圖片！
     2. 批量上傳圖片/轉換/下載檔案！
     3. 轉換成房間/插圖數據！
     4. 單色/多色模式！且支援智能偵測或匯入自訂的調色盤數據！
   - 如果為**單色模式**下的圖片最好是以二值化圖片來顯示 支援**透明png**圖片
   - 如果為**多色模式**下的圖片會自動色階化並匹配成調色盤數據顏色（最多八色）

2. **多色模式介紹**
   - **上傳/從文字匯入調色盤**數據並載入圖片時會切換成多色模式
   - 色階化方法分為**LAB**跟**HSL**兩種 前者適合肉眼相近色 後者適合明暗變化色
   - 可以使用**智能調色盤生成**來偵測圖片中的所有顏色
   - 偵測後再選取需要的顏色來產生對應的調色盤數據（記住要按生成才會套用數據）
   - 如果產生的結果不滿意可以多嘗試幾次自動偵測按鈕來重新產生不同組合
   - 真的還是不滿意可以試試看這兩個網站：
      - [**來自影像的顏色主題｜Adobe Color**](https://color.adobe.com/zh/create/image)
      - [**挑選圖片上的顏色**](https://www.ginifab.com.tw/tools/colors/color_picker_from_image.php)

   | 模式 | 單色模式 | 多色模式 |
   |------|----------------|------------|
   | 單圖模式 | ✖️ 不能切換預覽圖片 | ⭕ 點擊切換原圖/色階化預覽 |
   | 單圖模式 | ✖️ 不能切換對應圖片 | ✖️ 不能切換對應圖片 |
   | 批量模式 | ✖️ 不能切換預覽圖片 | ⭕ 點擊切換原圖/色階化預覽 |
   | 批量模式 | ⭕ 點擊切換檢視對應圖片 | ⭕ 點擊切換檢視對應圖片 |

3. **數據設定說明**
   - 網頁會根據圖片尺寸自動計算出建議的尺寸組合 可以點選來自動匹配數據
   - **批量模式**可以為每張圖片自訂精靈/插圖名稱及顏色索引
   - **多色模式**下不會顯示顏色索引和調色盤名稱

   房間/插圖數據與對應的名稱欄位說明：
   | 說明 | 房間數據 | 插圖數據 |
   |------|----------------|------------|
   | 單圖模式 | 房間名稱：（相同） | 插圖名稱：精靈名稱 |
   | 單圖模式 | 精靈名稱：（相同） | 檔名：房間名稱.mosigraphic |
   | 單圖模式 | 檔名：房間名稱.mosiroom | （無） |
   | 批量模式 | 房間名稱：（相同） | 插圖名稱：對應精靈名稱 |
   | 批量模式 | 精靈名稱：對應精靈名稱 | 檔名：對應精靈名稱.mosigraphic |
   | 批量模式 | 檔名：對應精靈名稱.mosiroom | （無） |

4. **生成數據說明**
   - 在生成之前可以先**預覽轉換結果**（支援各模式）
   - 如果不滿意還可以再手動調整數據設定重新預覽
   - 滿意後直接按生成就會產生數據供複製及下載
   - **批量模式**可以直接一鍵下載所有檔案！（需允許瀏覽器下載重複檔案）
   - 所有工具都支援上傳.json或.mosi相關檔案格式
   - 上傳哪種檔案格式就會轉換並下載成對應檔案格式！

### 2. 合併工具

1. **房間合併工具**
   - 可以上傳多個檔案並**拖曳順序**（最後一個欄位為最上層）
   - 房間包含多圖層或複雜顏色的可以用這個一鍵幫你合併起來
   - 或是如果要合併現有的房間可以將房間匯出後再進行合併
   - 可以合併的房間數量無上限！
   - ⚠️另外要注意合併的房間**所有房間屬性數據都要一致**！
   - 以及不同房間裡的**精靈名稱也不能重複**！否則會無法合併！

2. **精靈合併工具**
   - 可以上傳多個檔案並**拖曳順序**（最後一個欄位為最上層）
   - 基本上就是將多個單色精靈合併成一個多色精靈的工具！
   - 也可以將多色精靈再次合併單色精靈！或是多色精靈合併多色精靈！
   - **選擇要保留屬性的精靈**欄位是指最後套用成一個多色精靈時的所有相關屬性數據（`"name","isAvatar","isWall","isItem","isTransparent","scriptList”`)這些都會套用成指定精靈的數據
   - ⚠️除了`"width","height”`因為**精靈尺寸**都必須是**一致**的 如果上傳時不一致會出現錯誤！
     <details>
         <summary>關於精靈動畫幀的判定機制：</summary>
          會從所有精靈中判定擁有最大數量動畫幀的精靈 其他動畫幀不夠的精靈會自動填補<br>
          <ul><li>如最大數量為2
                <ul><li>1張動畫幀=(1,1)</li></ul></li></ul><ul>
             <li>如最大數量為3
                <ul><li>1張動畫幀=(1,1,1)
                   <li>2張動畫幀=(1,2,1)</li></ul></li></ul><ul>
             <li>如最大數量為4
                <ul><li>1張動畫幀=(1,1,1,1)
                   <li>2張動畫幀=(1,2,1,2)
                   <li>3張動畫幀=(1,2,2,3)</li></ul></li></ul>
      </details>

3. **房間合併單色精靈工具**
   - 合併多色精靈的進化版：直接合併房間內疊加的所有單色精靈為專屬的多色精靈！
   - 但是要記住由於不能決定精靈疊加順序 所以在房間內堆疊時必須注意順序
   - 合併後的多色精靈皆會統一為**該位置最上層的精靈屬性**
   - （除了`scriptList`會取已有的數據除非全為空才空)
   - 同時精靈名稱也會取名為`最上層的精靈名稱-合併(x,y)`
   - （座標是為了方便合併時確認位置 所以我只能留著）
   - 不過如果房間內還留有只有一個單色精靈的位置 則會保留該位置的單色精靈相關數據
   - ⚠️注意：房間合併並不會清除合併前的單色精靈！世界級合併工具才會清除！

4. **世界級合併工具**
   - 合併房間單色精靈的進化版：直接合併整個世界內所有房間內疊加的所有單色精靈為專屬的多色精靈！（好繞口）
   - 基本上要注意的點都寫在合併房間單色精靈工具裡ㄌ所以就不重複講ㄌ
   - ⚠️注意：世界合併會清除合併前的單色精靈！房間合併才會保留！

5. **插圖合併工具**
   - 可以上傳多個檔案並**拖曳順序**（最後一個欄位為最上層）
   - 基本上就是將多張單色插圖合併成一張多色插圖的工具！
   - 也可以將多色插圖再次合併單色插圖！或是多色插圖合併多色插圖！
   - **選擇要保留屬性的插圖**欄位是指最後套用成一張多色插圖時的部分屬性數據（`"name","paletteName","musicName","scriptList”`)這些都會套用成指定插圖的數據
   - ⚠️**其他圖片屬性數據都要一致**！否則會無法合併！

### 3. 轉換工具

1. **房間轉插圖工具**
   - 將房間數據轉換成插圖數據的偉大工具！
   - 但是要記住由於不能決定精靈疊加順序 所以在房間內堆疊時必須注意順序

2. **對話框皮膚轉換工具**
   - 將房間跟精靈數據轉換成對話框皮膚的轉換工具！
   - 需要準備一個房間數據：
      - 房間必須為**3x3**尺寸
      - 房間內的精靈不能有動畫幀
      - 必須包含**9**個精靈
      - 精靈**透明化屬性**必須一致
      - 精靈尺寸必須與**字體尺寸**一致
      - 支援多色格式
   - 和一個精靈數據：
      - 精靈尺寸必須與房間內的精靈尺寸一致
      - 支援動畫幀及多色格式
   - 轉換出來的數據可以測試看看呈現的效果如何
